## 进程，线程

进程：应用程序的启动实例。比如我们运行一个游戏，打开一个软件，就是开启了一个进程。

线程：线程从属于进程，是程序的实际执行者。一个进程至少包含一个主线程，也可以有更多的子线程。

**对操作系统来说，进程是最小的资源管理单元，线程是最小的执行单元。**无论进程还是线程，都是由操作系统直接管理。

实现并发功能的单位是线程。举个例子来说多线程就像是火车上的每节车厢，而进程就是火车。

## 进程之间的通信方式以及优缺点

**管道（PIPE）**：一种半双工的通信方式，常见的命名管道可以实现任意关系的进程间的通信。

**信号量（Semaphore）**：一个计数器，可以用来控制多个进程对资源的访问，它通常作为一种锁机制。

**信号（Signal）**：一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

**消息队列（Message Queue）**：是消息的链表，存放在内核中并由消息队列标识符标识，可以实现任意进程间的通信，并通过系统调用函数来实现消息发送和接收之间的同步。

**共享内存（Shared Memory）**：映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。

**套接字（Socket）**：可用于不同计算机间的进程通信。

## 线程之间的通信方式

**「线程间的通信目的主要是用于线程同步，所以线程没有像进程通信中的用于数据交换的通信机制。」**

**锁机制**：包括互斥锁/量（mutex）、读写锁（reader-writer lock）、自旋锁（spin lock）、条件变量（condition）。

**信号量机制（Semaphore）**：一个计数器，它允许同一时刻多个线程访问同一资源。

**信号机制（Signal）**：通过通知操作的方式来保持多线程同步，还可以方便的实现多线程优先级的比较操作。

**屏障（barrier）**：屏障允许每个线程等待，直到所有的合作线程都达到某一点，然后从该点继续执行。

## 选择

多进程：编程、调试容易，可靠性高；

**多线程：创建、销毁、切换速度快，内存、资源占用小。**

因此：

- 需要**频繁创建销毁**的优先用线程；
- 需要进行**大量计算**的优先使用线程；
- 强相关的处理用线程，弱相关的处理用进程；
- 可能要扩展到**分布式集群**的用进程，多核分布的用线程。

## 协程

**协程，英文Coroutines，是一种比线程更加轻量级的存在。**正如一个进程可以拥有多个线程一样，一个线程也可以拥有多个协程。

协程不是被操作系统内核所管理，而完全是由程序所控制（也就是在用户态执行）。这样带来的好处就是性能得到了很大的提升，不会像线程切换那样消耗资源。因此，**协程的开销远远小于线程的开销。**

go天生支持，python可以使用async/await。