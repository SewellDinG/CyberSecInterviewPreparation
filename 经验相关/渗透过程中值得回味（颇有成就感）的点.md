## 渗透过程中值得回味（颇有成就感）的点？

- 当SQL注入支持Stacked Queries堆叠查询时，可以直接update管理员的加密hash，进去之后再改回。有点修改Win密码的意思，当在shell中抓不到用户密码时，直接修改密码登陆服务器再进行抓取，由于用户并未登出系统，密码hash仍处在内存中。
- 钓鱼，可以使用`filename.pdf          一堆空格.exe`来命名，然后将图标更改为pdf的，压缩好再去发送。但有个细节是有部分压缩包在预览时无法使用exe来执行，需要解压，这可以给压缩包加个密码，在配点涉密文案诱使目标解压。
- 钓鱼，使用unicode的RLO翻转控制符，如cdtxt.exe在cd后插入`\u202e`，会变成cdexe.txt。
- 黑吃黑，爆破webshell，原理是每次发包使用多个参数进行echo；冰蝎默认webshell逻辑处理有问题，可以直接post AES128使用空密码加密的payload来绕过密码限制。
- 遇到内网有流量审计、流量监控设备，直接明文传输会被审查到，使用openssl反弹443端口。
- spring boot 有个actuator监控插件，1.x 从/heapdump获取调用栈相关信息，sping boot 2.x 的话路径就是/actuator/heapdump。spring boot会将pass等敏感字段使用\*星号脱敏，比如aliyun的ak/sk，这时候可以利用内存分析工具导入heapdump，通过关键字来快速定位找到ak/sk，进而导入行云管家可看到名下的ECS。但如果是使用了RAM（子账户、访问控制），一般拿到的Key也只是OSS服务的吧，搞不定ECS。
