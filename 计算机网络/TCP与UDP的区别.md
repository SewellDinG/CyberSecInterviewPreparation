## TCP 与 UDP 的区别？

**从隧道的角度来解释，http和dns隧道，进而引出icmp隧道。**

传输控制协议（Transmission Control Protocol，TCP），是一种面向连接的、可靠的、基于字节流的传输层协议。

用户数据报协议（User Datagram Protocol，UDP），是一个无连接的、简单的、面向数据报的传输层协议。

- 针对连接和速度方面。TCP是面向连接的，只能是点到点连接，速度较慢；UDP是基于非连接的，支持一对一、一对多、多对一、多对多的交互通信，速度相对较快。
- 针对实时性、可靠性和安全性。TCP的发送方要确认接收方是否收到数据报（三次握手、重新确认等）的行为会有一定的延时，实时性较差；UDP没有连接建立的过程，实时性较强。TCP协议在IP协议的基础上添加了序号机制、确认机制、超时重传机制等机制，保证了传输的可靠性，不会出现丢包或乱序；而UDP容易产生丢包。TCP连接过程较为复杂，易于黑客攻击；UDP相对安全。
- 针对开销问题。在传输相同大小的数据时，TCP头部有20字节的开销，UDP则为8字节，TCP报头比UDP复杂，因此实际包含的用户数据较少，开销较大；而UDP开销较小。
- 针对应用场合的选择。需要传输大量数据且对可靠性要求较高的情况下使用TCP；对实时性要求高，需要高速传输的情况下使用UDP；对可靠性要求低，追求效率的情况下使用UDP。