## TCP 与 UDP 的区别？

**从隧道的角度来解释，http和dns隧道，进而引出icmp隧道。**

1. TCP 面向连接，UDP 是无连接的；
2. TCP 提供可靠的服务，也就是说，通过 TCP 连接传送的数据，无差错，不丢失，不重复，且按序到达；UDP 尽最大努力交付，即不保证可靠交付
3. TCP 的逻辑通信信道是全双工的可靠信道；UDP 则是不可靠信道
4. 每一条 TCP 连接只能是点到点的；UDP 支持一对一，一对多，多对一和多对多的交互通信
5. TCP 面向字节流（可能出现黏包问题），实际上是 TCP 把数据看成一连串无结构的字节流；UDP 是面向报文的（不会出现黏包问题）
6. UDP 没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如 IP 电话，实时视频会议等）
7. TCP 首部开销20字节；UDP 的首部开销小，只有 8 个字节

## Other

传输控制协议（Transmission Control Protocol，TCP），是一种面向连接的、可靠的、基于字节流的传输层协议。

用户数据报协议（User Datagram Protocol，UDP），是一个无连接的、简单的、面向数据报的传输层协议。

- 针对连接和速度方面。TCP是面向连接的，只能是点到点连接，速度较慢；UDP是基于非连接的，支持一对一、一对多、多对一、多对多的交互通信，速度相对较快。
- 针对实时性、可靠性和安全性。TCP的发送方要确认接收方是否收到数据报（三次握手、重新确认等）的行为会有一定的延时，实时性较差；UDP没有连接建立的过程，实时性较强。TCP协议在IP协议的基础上添加了序号机制、确认机制、超时重传机制等机制，保证了传输的可靠性，不会出现丢包或乱序；而UDP容易产生丢包。TCP连接过程较为复杂，易于黑客攻击；UDP相对安全。
- 针对开销问题。在传输相同大小的数据时，TCP头部有20字节的开销，UDP则为8字节，TCP报头比UDP复杂，因此实际包含的用户数据较少，开销较大；而UDP开销较小。
- 针对应用场合的选择。需要传输大量数据且对可靠性要求较高的情况下使用TCP；对实时性要求高，需要高速传输的情况下使用UDP；对可靠性要求低，追求效率的情况下使用UDP。